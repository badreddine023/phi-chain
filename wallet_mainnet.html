<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Φ-Chain Mainnet Wallet</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/3.0.3/plotly.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gold: #b9a369;
            --dark-bg: #0a0a0a;
            --card-bg: #1a1a1a;
            --accent-gold: #d4af37;
            --text-light: #f0f0f0;
            --text-muted: #a0a0a0;
            --border-color: rgba(185, 163, 105, 0.2);
            --gradient-primary: linear-gradient(135deg, #b9a369, #d4af37);
            --shadow-gold: 0 10px 30px rgba(185, 163, 105, 0.3);
            --success-green: #22c55e;
            --error-red: #ef4444;
            --warning-orange: #f59e0b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-bg);
            color: var(--text-light);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .header {
            text-align: center;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .header h1 {
            font-size: 3rem;
            color: var(--primary-gold);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }
        
        .header p {
            color: var(--text-muted);
            font-size: 1.1rem;
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1rem;
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--border-color);
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .status-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .status-online {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success-green);
            border: 1px solid var(--success-green);
        }
        
        .status-mining {
            background: rgba(185, 163, 105, 0.2);
            color: var(--primary-gold);
            border: 1px solid var(--primary-gold);
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 2rem;
            transition: all 0.3s ease;
        }
        
        .card:hover {
            border-color: var(--primary-gold);
            box-shadow: var(--shadow-gold);
        }
        
        .card h3 {
            color: var(--primary-gold);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        
        .balance {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-gold);
            margin: 1rem 0;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .balance-label {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .address-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 0.8rem;
            border-radius: 10px;
            margin: 1rem 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            word-break: break-all;
            border: 1px solid var(--border-color);
        }
        
        .btn {
            background: var(--gradient-primary);
            color: var(--dark-bg);
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-gold);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: transparent;
            border: 1px solid var(--primary-gold);
            color: var(--primary-gold);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #b91c1c);
            color: white;
        }
        
        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        
        .stat {
            margin: 0.8rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .stat-label {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .stat-value {
            color: var(--primary-gold);
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            transition: background 0.3s ease;
        }
        
        .transaction-item:hover {
            background: rgba(185, 163, 105, 0.1);
        }
        
        .transaction-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .tx-sent {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error-red);
        }
        
        .tx-received {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success-green);
        }
        
        .tx-mining {
            background: rgba(185, 163, 105, 0.2);
            color: var(--primary-gold);
        }
        
        .transaction-details {
            flex: 1;
        }
        
        .transaction-type {
            font-weight: 600;
            color: var(--text-light);
        }
        
        .transaction-address {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .transaction-amount {
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .modal-header h2 {
            color: var(--primary-gold);
            margin: 0;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .modal-close:hover {
            color: var(--text-light);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-light);
            font-weight: 500;
        }
        
        .form-input {
            width: 100%;
            padding: 0.8rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-light);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            transition: border-color 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary-gold);
            background: rgba(185, 163, 105, 0.05);
        }
        
        .alert {
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .alert-success {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid var(--success-green);
            color: var(--success-green);
        }
        
        .alert-error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid var(--error-red);
            color: var(--error-red);
        }
        
        .alert-info {
            background: rgba(185, 163, 105, 0.2);
            border: 1px solid var(--primary-gold);
            color: var(--primary-gold);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--border-color);
            border-top-color: var(--primary-gold);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .nav-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .nav-btn {
            padding: 0.8rem 1.5rem;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .nav-btn.active {
            background: var(--gradient-primary);
            color: var(--dark-bg);
            border-color: var(--primary-gold);
        }
        
        .nav-btn:hover {
            border-color: var(--primary-gold);
            color: var(--primary-gold);
        }
        
        .chart-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .balance {
                font-size: 1.8rem;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .status-bar {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-link"></i> Φ-Chain Mainnet Wallet</h1>
            <p>Secure blockchain operations powered by the Golden Ratio</p>
        </div>
        
        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <span class="status-badge status-online" id="connection-status">
                    <i class="fas fa-circle"></i> Connected
                </span>
            </div>
            <div class="status-item">
                <span class="status-badge status-mining" id="mining-status">
                    <i class="fas fa-cube"></i> Block: <span id="block-height">1</span>
                </span>
            </div>
            <div class="status-item">
                <span class="status-badge" style="background: rgba(59, 130, 246, 0.2); color: #3b82f6; border: 1px solid #3b82f6;">
                    <i class="fas fa-users"></i> Validators: <span id="validator-count">0</span>
                </span>
            </div>
        </div>
        
        <!-- Navigation Tabs -->
        <div class="nav-bar">
            <button class="nav-btn active" onclick="switchTab('wallet')"><i class="fas fa-wallet"></i> Wallet</button>
            <button class="nav-btn" onclick="switchTab('staking')"><i class="fas fa-lock"></i> Staking</button>
            <button class="nav-btn" onclick="switchTab('mining')"><i class="fas fa-hammer"></i> Mining</button>
            <button class="nav-btn" onclick="switchTab('transactions')"><i class="fas fa-history"></i> History</button>
        </div>
        
        <!-- Wallet Tab -->
        <div id="wallet-tab" class="tab-content">
            <div class="grid">
                <!-- Balance Card -->
                <div class="card">
                    <h3><i class="fas fa-coins"></i> Wallet Balance</h3>
                    <div class="balance-label">Total Balance</div>
                    <div class="balance" id="main-balance">0.000 Φ</div>
                    <div class="address-display" id="wallet-address">0x...</div>
                    <div class="btn-group">
                        <button class="btn" onclick="openSendModal()"><i class="fas fa-paper-plane"></i> Send</button>
                        <button class="btn btn-secondary" onclick="copyAddress()"><i class="fas fa-copy"></i> Copy</button>
                    </div>
                </div>
                
                <!-- Account Info -->
                <div class="card">
                    <h3><i class="fas fa-info-circle"></i> Account Information</h3>
                    <div class="stat">
                        <span class="stat-label">Network</span>
                        <span class="stat-value">Φ-Chain Mainnet</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Chain ID</span>
                        <span class="stat-value">1</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Block Height</span>
                        <span class="stat-value" id="chain-length">1</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Pending Txs</span>
                        <span class="stat-value" id="pending-txs">0</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Staking Tab -->
        <div id="staking-tab" class="tab-content" style="display: none;">
            <div class="grid">
                <!-- Staking Card -->
                <div class="card">
                    <h3><i class="fas fa-lock"></i> Staking & Governance</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">Stake your Φ tokens to secure the network and earn rewards.</p>
                    <div class="balance-label">Staked Amount</div>
                    <div class="balance" id="staked-balance">0.000 Φ</div>
                    <div class="stat">
                        <span class="stat-label">Annual Percentage Rate</span>
                        <span class="stat-value">14.4%</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Minimum Stake</span>
                        <span class="stat-value">6,765 Φ</span>
                    </div>
                    <button class="btn" style="width: 100%; margin-top: 1.5rem;" onclick="openStakingModal()">
                        <i class="fas fa-arrow-up"></i> Stake Tokens
                    </button>
                </div>
                
                <!-- Rewards Card -->
                <div class="card">
                    <h3><i class="fas fa-gift"></i> Rewards</h3>
                    <div class="balance-label">Total Rewards Earned</div>
                    <div class="balance" id="total-rewards">0.000 Φ</div>
                    <div class="stat">
                        <span class="stat-label">Pending Rewards</span>
                        <span class="stat-value" id="pending-rewards">0.000 Φ</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Last Reward</span>
                        <span class="stat-value" id="last-reward">—</span>
                    </div>
                    <button class="btn" style="width: 100%; margin-top: 1.5rem;" onclick="claimRewards()">
                        <i class="fas fa-check"></i> Claim Rewards
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mining Tab -->
        <div id="mining-tab" class="tab-content" style="display: none;">
            <div class="grid">
                <!-- Mining Status -->
                <div class="card">
                    <h3><i class="fas fa-hammer"></i> PoC Mining</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">Proof-of-Coherence mining based on Fibonacci Q-Matrix.</p>
                    <div class="stat">
                        <span class="stat-label">Mining Status</span>
                        <span class="stat-value" id="mining-active">Inactive</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Hashrate</span>
                        <span class="stat-value" id="hashrate">0.000 GH/s</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Blocks Mined</span>
                        <span class="stat-value" id="blocks-mined">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Coherence Score</span>
                        <span class="stat-value" id="coherence-score">0.000</span>
                    </div>
                    <button class="btn" style="width: 100%; margin-top: 1.5rem;" id="mining-toggle" onclick="toggleMining()">
                        <i class="fas fa-play-circle"></i> Start Mining
                    </button>
                </div>
                
                <!-- Mining Rewards -->
                <div class="card">
                    <h3><i class="fas fa-chart-line"></i> Mining Rewards</h3>
                    <div class="balance-label">Total Mining Rewards</div>
                    <div class="balance" id="mining-rewards">0.000 Φ</div>
                    <div class="stat">
                        <span class="stat-label">Block Reward</span>
                        <span class="stat-value">89 Φ</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Difficulty</span>
                        <span class="stat-value" id="difficulty">2</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Est. Next Block</span>
                        <span class="stat-value" id="next-block">8s</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Transactions Tab -->
        <div id="transactions-tab" class="tab-content" style="display: none;">
            <div class="card">
                <h3><i class="fas fa-history"></i> Transaction History</h3>
                <div id="tx-history" style="margin-top: 1rem;">
                    <p style="color: var(--text-muted); text-align: center; padding: 2rem;">
                        <i class="fas fa-inbox"></i> No transactions yet
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Send Transaction Modal -->
    <div id="send-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Send Transaction</h2>
                <button class="modal-close" onclick="closeSendModal()">×</button>
            </div>
            <form onsubmit="sendTransaction(event)">
                <div class="form-group">
                    <label class="form-label">Recipient Address</label>
                    <input type="text" class="form-input" id="recipient-address" placeholder="0x..." required>
                </div>
                <div class="form-group">
                    <label class="form-label">Amount (Φ)</label>
                    <input type="number" class="form-input" id="send-amount" placeholder="0.000" step="0.001" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Gas Limit</label>
                    <input type="number" class="form-input" id="gas-limit" value="21000" required>
                </div>
                <div id="send-alert"></div>
                <button type="submit" class="btn" style="width: 100%;">
                    <i class="fas fa-paper-plane"></i> Send
                </button>
            </form>
        </div>
    </div>
    
    <!-- Staking Modal -->
    <div id="staking-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Stake Tokens</h2>
                <button class="modal-close" onclick="closeStakingModal()">×</button>
            </div>
            <form onsubmit="stakeTokens(event)">
                <div class="form-group">
                    <label class="form-label">Validator ID</label>
                    <input type="text" class="form-input" id="validator-id" placeholder="validator_001" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Stake Amount (Φ)</label>
                    <input type="number" class="form-input" id="stake-amount" placeholder="6765" required>
                </div>
                <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem;">
                    <i class="fas fa-info-circle"></i> Stake amount must be a Fibonacci number (minimum 6,765 Φ)
                </p>
                <div id="staking-alert"></div>
                <button type="submit" class="btn" style="width: 100%;">
                    <i class="fas fa-lock"></i> Stake
                </button>
            </form>
        </div>
    </div>
    
    <script>
        // API Base URL
        const API_URL = 'http://localhost:8000/api';
        
        // Wallet State
        let wallet = {
            address: '0x742d35Cc6634C0532925a3b844Bc454e4438f44e',
            balance: 0,
            stakedBalance: 0,
            isMining: false
        };
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeWallet();
            setupWebSocket();
            updateBlockchainInfo();
            setInterval(updateBlockchainInfo, 5000);
        });
        
        // Initialize Wallet
        async function initializeWallet() {
            try {
                document.getElementById('wallet-address').textContent = wallet.address;
                await updateBalance();
            } catch (error) {
                console.error('Failed to initialize wallet:', error);
            }
        }
        
        // Update Balance
        async function updateBalance() {
            try {
                const response = await fetch(`${API_URL}/wallet/balance/${wallet.address}`);
                const data = await response.json();
                wallet.balance = data.balance;
                document.getElementById('main-balance').textContent = formatBalance(data.balance);
            } catch (error) {
                console.error('Failed to fetch balance:', error);
            }
        }
        
        // Update Blockchain Info
        async function updateBlockchainInfo() {
            try {
                const response = await fetch(`${API_URL}/blockchain/info`);
                const data = await response.json();
                
                document.getElementById('block-height').textContent = data.chain_length;
                document.getElementById('chain-length').textContent = data.chain_length;
                document.getElementById('pending-txs').textContent = data.pending_transactions;
                
                // Update validators
                const validatorsResponse = await fetch(`${API_URL}/staking/validators`);
                const validatorsData = await validatorsResponse.json();
                document.getElementById('validator-count').textContent = validatorsData.total;
            } catch (error) {
                console.error('Failed to fetch blockchain info:', error);
            }
        }
        
        // Setup WebSocket
        function setupWebSocket() {
            try {
                const ws = new WebSocket('ws://localhost:8000/ws/blockchain');
                
                ws.onopen = () => {
                    console.log('WebSocket connected');
                    document.getElementById('connection-status').innerHTML = 
                        '<i class="fas fa-circle"></i> Connected';
                };
                
                ws.onmessage = (event) => {
                    const data = JSON.parse(event.data);
                    if (data.type === 'blockchain_update') {
                        document.getElementById('block-height').textContent = data.chain_length;
                    }
                };
                
                ws.onerror = () => {
                    document.getElementById('connection-status').innerHTML = 
                        '<i class="fas fa-circle"></i> Disconnected';
                };
            } catch (error) {
                console.error('WebSocket error:', error);
            }
        }
        
        // Send Transaction
        async function sendTransaction(event) {
            event.preventDefault();
            
            const recipient = document.getElementById('recipient-address').value;
            const amount = parseFloat(document.getElementById('send-amount').value);
            const gasLimit = parseInt(document.getElementById('gas-limit').value);
            
            try {
                const response = await fetch(`${API_URL}/wallet/send`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        from: wallet.address,
                        to: recipient,
                        amount: amount,
                        gas_limit: gasLimit
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showAlert('send-alert', `Transaction sent! Hash: ${data.tx_hash.substring(0, 16)}...`, 'success');
                    setTimeout(() => closeSendModal(), 2000);
                    await updateBalance();
                } else {
                    showAlert('send-alert', data.detail, 'error');
                }
            } catch (error) {
                showAlert('send-alert', 'Failed to send transaction', 'error');
            }
        }
        
        // Stake Tokens
        async function stakeTokens(event) {
            event.preventDefault();
            
            const validatorId = document.getElementById('validator-id').value;
            const stakeAmount = parseInt(document.getElementById('stake-amount').value);
            
            try {
                const response = await fetch(`${API_URL}/staking/stake`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        validator_id: validatorId,
                        amount: stakeAmount
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showAlert('staking-alert', 'Validator registered successfully!', 'success');
                    setTimeout(() => closeStakingModal(), 2000);
                } else {
                    showAlert('staking-alert', data.detail, 'error');
                }
            } catch (error) {
                showAlert('staking-alert', 'Failed to stake tokens', 'error');
            }
        }
        
        // Toggle Mining
        function toggleMining() {
            wallet.isMining = !wallet.isMining;
            const btn = document.getElementById('mining-toggle');
            const status = document.getElementById('mining-active');
            
            if (wallet.isMining) {
                btn.innerHTML = '<i class="fas fa-stop-circle"></i> Stop Mining';
                btn.style.background = 'linear-gradient(135deg, #ef4444, #b91c1c)';
                btn.style.color = 'white';
                status.textContent = 'Active';
                status.style.color = 'var(--success-green)';
            } else {
                btn.innerHTML = '<i class="fas fa-play-circle"></i> Start Mining';
                btn.style.background = 'var(--gradient-primary)';
                btn.style.color = 'var(--dark-bg)';
                status.textContent = 'Inactive';
                status.style.color = 'var(--text-muted)';
            }
        }
        
        // Claim Rewards
        function claimRewards() {
            alert('Rewards claimed! Check your balance.');
        }
        
        // Copy Address
        function copyAddress() {
            navigator.clipboard.writeText(wallet.address);
            alert('Address copied to clipboard!');
        }
        
        // Switch Tab
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active class from buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').style.display = 'block';
            
            // Add active class to button
            event.target.classList.add('active');
        }
        
        // Modal Functions
        function openSendModal() {
            document.getElementById('send-modal').classList.add('active');
        }
        
        function closeSendModal() {
            document.getElementById('send-modal').classList.remove('active');
        }
        
        function openStakingModal() {
            document.getElementById('staking-modal').classList.add('active');
        }
        
        function closeStakingModal() {
            document.getElementById('staking-modal').classList.remove('active');
        }
        
        // Show Alert
        function showAlert(elementId, message, type) {
            const alertDiv = document.getElementById(elementId);
            alertDiv.innerHTML = `
                <div class="alert alert-${type}">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
        }
        
        // Format Balance
        function formatBalance(balance) {
            return (balance / 1e18).toFixed(3) + ' Φ';
        }
        
        // Close modals on outside click
        window.onclick = (event) => {
            const sendModal = document.getElementById('send-modal');
            const stakingModal = document.getElementById('staking-modal');
            
            if (event.target === sendModal) {
                closeSendModal();
            }
            if (event.target === stakingModal) {
                closeStakingModal();
            }
        };
    </script>
</body>
</html>
